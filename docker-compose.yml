version: '3'
services:
    database:
        image: mysql:5.7
        ports:
            - "3307:3306"
        restart: on-failure:5
        environment:
            MYSQL_DATABASE: <insira_nome_do_banco>
            MYSQL_USER: <insira_usuario_do_wp_ao_banco>
            MYSQL_PASSWORD: <insira_senha_do_banco>
            MYSQL_ROOT_PASSWORD: <insira_senha_root_do_banco>
    wordpress:
        depends_on:
            - database
        image: wordpress:latest
        ports:
            - "8000:80"
        restart: on-failure:5
        volumes:
            - ./public:/var/www/html
        environment:
            WORDPRESS_DB_HOST: database:3306
            WORDPRESS_DB_NAME: <nome_do_banco>
            WORDPRESS_DB_USER: <usuario_do_banco>
            WORDPRESS_DB_PASSWORD: <senha_do_banco>
    phpmyadmin:
        depends_on:
            - wordpress
        image: phpmyadmin/phpmyadmin
        ports:
            - 8080:80
        restart: on-failure:5
        environment:
            PMA_HOST: database
    wordmove:
        tty: true
        depends_on:
            - wordpress
        #image: mfuezesi/wordmove
        build: ./wordmove
        restart: on-failure:5
        volumes:
            - ./config:/home
            - ./public:/var/www/html
            - ~/.ssh:/root/.ssh      # (!)
#######################################
#
# If you want to use custom container
# names, you can assign a *container_name*
# property to each service.
#
# In case you want to reuse this config 
# for another Wordpress project and 
# them have both run *simultaneously*
# you'll need to:
#
# - change wordmove's container_name
#   to anything else - marked as (+)
#   e.g. wordmove123
#
# - change the first number of ports
#   to another one   - marked as (*)
#   "<new_host_port>:<container_port>"
#   e.g.
#    - change wordpres port numbers 
#      from "8000:80" to "8001:80"
#    - change phmyadmin port numbers 
#      from "8080:80" to "8081:80
#    - change database port numbers 
#      form "3307:3306" to "3308:3306" 
#
# (!) Copy your local .ssh keys only if 
#     necessary to connect to remote
#######################################
